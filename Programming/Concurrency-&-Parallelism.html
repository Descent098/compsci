<!DOCTYPE html>
<html><head><title>Concurrency &amp; Parallelism</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="Concurrency &amp; Parallelism"/><meta property="og:description" content="Most code is serial. This means it runs from top to bottom, and it runs one line at a time. There are various different ways that we can break this paradigm and run our code ‚Äúmultiple lines‚Äù at a time."/><meta property="og:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../static/icon.png"/><meta name="description" content="Most code is serial. This means it runs from top to bottom, and it runs one line at a time. There are various different ways that we can break this paradigm and run our code ‚Äúmultiple lines‚Äù at a time."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../static/contentIndex.json").then(data => data.json())</script></head><body data-slug="Programming/Concurrency-&amp;-Parallelism"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title "><a href="..">Computer Science Knowledge Base</a></h1><div class="spacer mobile-only"></div><div class="search "><div id="search-icon"><p>Search</p><div></div><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="darkmode "><input class="toggle" id="darkmode-toggle" type="checkbox" tabindex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;Databases&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Game-Dev-&amp;-Graphics&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Hardware&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;HCI-&amp;-VR&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Networks&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Networks/OSI&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;OS-&amp;-Firmware&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Programming&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Security-&amp;-Cryptography&quot;,&quot;collapsed&quot;:true}]"><h1>Menu</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Databases"><button class="folder-button"><span class="folder-title">Databases</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Databases"><li><a href="../Databases/Basics" data-for="Databases/Basics">üå±Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Game-Dev-&amp;-Graphics"><button class="folder-button"><span class="folder-title">Game Dev &amp; Graphics</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Game-Dev-&amp;-Graphics"><li><a href="../Game-Dev-&amp;-Graphics/Basics" data-for="Game-Dev-&amp;-Graphics/Basics">üå±Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Hardware"><button class="folder-button"><span class="folder-title">Hardware</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Hardware"><li><a href="../Hardware/Basics" data-for="Hardware/Basics">üå±Basics/Intro</a></li><li><a href="../Hardware/RAM" data-for="Hardware/RAM">RAM</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="HCI-&amp;-VR"><button class="folder-button"><span class="folder-title">HCI &amp; VR</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="HCI-&amp;-VR"><li><a href="../HCI-&amp;-VR/Basics" data-for="HCI-&amp;-VR/Basics">üå±Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Networks"><button class="folder-button"><span class="folder-title">Networks</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Networks"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Networks/OSI"><button class="folder-button"><span class="folder-title">OSI</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Networks/OSI"><li><a href="../Networks/OSI/2.-Link" data-for="Networks/OSI/2.-Link">2. Link</a></li><li><a href="../Networks/OSI/3.-Network" data-for="Networks/OSI/3.-Network">3. Network</a></li><li><a href="../Networks/OSI/5-7.-Application" data-for="Networks/OSI/5-7.-Application">5-7. Application</a></li></ul></div></li><li><a href="../Networks/Basics" data-for="Networks/Basics">üå±Basics/Intro</a></li><li><a href="../Networks/HTTP" data-for="Networks/HTTP">HTTP</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="OS-&amp;-Firmware"><button class="folder-button"><span class="folder-title">OS &amp; Firmware</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="OS-&amp;-Firmware"><li><a href="../OS-&amp;-Firmware/Basics" data-for="OS-&amp;-Firmware/Basics">üå±Basics/Intro</a></li><li><a href="../OS-&amp;-Firmware/Unix-&amp;-Linux" data-for="OS-&amp;-Firmware/Unix-&amp;-Linux">Linux</a></li><li><a href="../OS-&amp;-Firmware/Userspace" data-for="OS-&amp;-Firmware/Userspace">Userspace</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Programming"><button class="folder-button"><span class="folder-title">Programming</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Programming"><li><a href="../Programming/Basics" data-for="Programming/Basics">üå±Basics/Intro</a></li><li><a href="../Programming/Caching" data-for="Programming/Caching">Caching</a></li><li><a href="../Programming/Compression" data-for="Programming/Compression">Compression</a></li><li><a href="../Programming/Concurrency-&amp;-Parallelism" data-for="Programming/Concurrency-&amp;-Parallelism">Concurrency &amp; Parallelism</a></li><li><a href="../Programming/Encodings" data-for="Programming/Encodings">Encodings</a></li><li><a href="../Programming/Open-Source-&amp;-Free-Software" data-for="Programming/Open-Source-&amp;-Free-Software">FOSS (Free and Open Source Software)</a></li><li><a href="../Programming/Hashing" data-for="Programming/Hashing">Hashing</a></li><li><a href="../Programming/Binary,-Hexadecimal-and-Number-Systems" data-for="Programming/Binary,-Hexadecimal-and-Number-Systems">Number Systems (binary &amp; hex)</a></li><li><a href="../Programming/Python" data-for="Programming/Python">Python</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Security-&amp;-Cryptography"><button class="folder-button"><span class="folder-title">Security &amp; Cryptography</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Security-&amp;-Cryptography"><li><a href="../Security-&amp;-Cryptography/Basics" data-for="Security-&amp;-Cryptography/Basics">üå±Basics/Intro</a></li><li><a href="../Security-&amp;-Cryptography/Whitehat,-Grey-Hat,-and-Black-Hat-Hacking" data-for="Security-&amp;-Cryptography/Whitehat,-Grey-Hat,-and-Black-Hat-Hacking">White, Grey &amp; Black Hat Hacking</a></li></ul></div></li><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container " aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../">Home</a><p> ‚ùØ </p></div><div class="breadcrumb-element"><a href="../Programming/">Programming</a></div></nav><div class="explorer mobile-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;Databases&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Game-Dev-&amp;-Graphics&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Hardware&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;HCI-&amp;-VR&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Networks&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Networks/OSI&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;OS-&amp;-Firmware&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Programming&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Security-&amp;-Cryptography&quot;,&quot;collapsed&quot;:true}]"><h1>Menu</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Databases"><button class="folder-button"><span class="folder-title">Databases</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Databases"><li><a href="../Databases/Basics" data-for="Databases/Basics">üå±Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Game-Dev-&amp;-Graphics"><button class="folder-button"><span class="folder-title">Game Dev &amp; Graphics</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Game-Dev-&amp;-Graphics"><li><a href="../Game-Dev-&amp;-Graphics/Basics" data-for="Game-Dev-&amp;-Graphics/Basics">üå±Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Hardware"><button class="folder-button"><span class="folder-title">Hardware</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Hardware"><li><a href="../Hardware/Basics" data-for="Hardware/Basics">üå±Basics/Intro</a></li><li><a href="../Hardware/RAM" data-for="Hardware/RAM">RAM</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="HCI-&amp;-VR"><button class="folder-button"><span class="folder-title">HCI &amp; VR</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="HCI-&amp;-VR"><li><a href="../HCI-&amp;-VR/Basics" data-for="HCI-&amp;-VR/Basics">üå±Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Networks"><button class="folder-button"><span class="folder-title">Networks</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Networks"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Networks/OSI"><button class="folder-button"><span class="folder-title">OSI</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Networks/OSI"><li><a href="../Networks/OSI/2.-Link" data-for="Networks/OSI/2.-Link">2. Link</a></li><li><a href="../Networks/OSI/3.-Network" data-for="Networks/OSI/3.-Network">3. Network</a></li><li><a href="../Networks/OSI/5-7.-Application" data-for="Networks/OSI/5-7.-Application">5-7. Application</a></li></ul></div></li><li><a href="../Networks/Basics" data-for="Networks/Basics">üå±Basics/Intro</a></li><li><a href="../Networks/HTTP" data-for="Networks/HTTP">HTTP</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="OS-&amp;-Firmware"><button class="folder-button"><span class="folder-title">OS &amp; Firmware</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="OS-&amp;-Firmware"><li><a href="../OS-&amp;-Firmware/Basics" data-for="OS-&amp;-Firmware/Basics">üå±Basics/Intro</a></li><li><a href="../OS-&amp;-Firmware/Unix-&amp;-Linux" data-for="OS-&amp;-Firmware/Unix-&amp;-Linux">Linux</a></li><li><a href="../OS-&amp;-Firmware/Userspace" data-for="OS-&amp;-Firmware/Userspace">Userspace</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Programming"><button class="folder-button"><span class="folder-title">Programming</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Programming"><li><a href="../Programming/Basics" data-for="Programming/Basics">üå±Basics/Intro</a></li><li><a href="../Programming/Caching" data-for="Programming/Caching">Caching</a></li><li><a href="../Programming/Compression" data-for="Programming/Compression">Compression</a></li><li><a href="../Programming/Concurrency-&amp;-Parallelism" data-for="Programming/Concurrency-&amp;-Parallelism">Concurrency &amp; Parallelism</a></li><li><a href="../Programming/Encodings" data-for="Programming/Encodings">Encodings</a></li><li><a href="../Programming/Open-Source-&amp;-Free-Software" data-for="Programming/Open-Source-&amp;-Free-Software">FOSS (Free and Open Source Software)</a></li><li><a href="../Programming/Hashing" data-for="Programming/Hashing">Hashing</a></li><li><a href="../Programming/Binary,-Hexadecimal-and-Number-Systems" data-for="Programming/Binary,-Hexadecimal-and-Number-Systems">Number Systems (binary &amp; hex)</a></li><li><a href="../Programming/Python" data-for="Programming/Python">Python</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Security-&amp;-Cryptography"><button class="folder-button"><span class="folder-title">Security &amp; Cryptography</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Security-&amp;-Cryptography"><li><a href="../Security-&amp;-Cryptography/Basics" data-for="Security-&amp;-Cryptography/Basics">üå±Basics/Intro</a></li><li><a href="../Security-&amp;-Cryptography/Whitehat,-Grey-Hat,-and-Black-Hat-Hacking" data-for="Security-&amp;-Cryptography/Whitehat,-Grey-Hat,-and-Black-Hat-Hacking">White, Grey &amp; Black Hat Hacking</a></li></ul></div></li><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div><h1 class="article-title ">Concurrency &amp; Parallelism</h1><p class="content-meta ">Jan 19, 2024, 21 min read</p><div class="toc mobile-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#asyncawait" data-for="asyncawait">Async/Await</a></li><li class="depth-0"><a href="#multiprocessing" data-for="multiprocessing">Multiprocessing</a></li><li class="depth-0"><a href="#threading" data-for="threading">Threading</a></li><li class="depth-1"><a href="#start-and-join" data-for="start-and-join">start() and join()</a></li><li class="depth-1"><a href="#thread-manager" data-for="thread-manager">Thread Manager</a></li><li class="depth-0"><a href="#concurrency-vs-parallelism" data-for="concurrency-vs-parallelism">Concurrency vs Parallelism</a></li><li class="depth-0"><a href="#synchronization" data-for="synchronization">Synchronization</a></li><li class="depth-1"><a href="#synchronization-primitives" data-for="synchronization-primitives">Synchronization Primitives</a></li><li class="depth-0"><a href="#additional-resources" data-for="additional-resources">Additional Resources</a></li></ul></div></div></div></div><article class="popover-hint"><p>Most code is serial. This means it runs from top to bottom, and it runs one line at a time. There are various different ways that we can break this paradigm and run our code ‚Äúmultiple lines‚Äù at a time. There are 4 main ways this is discussed:</p>
<ol>
<li>Asynchronous programming</li>
<li>Parallel programming</li>
<li>Multi-processing</li>
<li>Multi-Threading</li>
</ol>
<p>Unfortunately these terms can mean something different in different contexts, so instead I will talk about 2 more general categories asynchronous vs parallel.</p>
<h2 id="asyncawait">Async/Await<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#asyncawait" class="internal alias"> ¬ß</a></h2>
<p>Asynchronous execution (which I‚Äôll shorten to async), is a way of running a program where you can <strong>switch back and forth</strong> between tasks that are executing (<a href="#concurrency-vs-parallelism" class="internal alias">concurrent programming</a>). For example if you have a function that has to access a database, but other operations can run while you‚Äôre waiting for that to finish, then you could asynchronously call the database, and run the other tasks in the meantime. Once the database call is finished, you can switch back to the method running the database call. With the following pseudocode:</p>
<pre><code>async function getData(){
	return callToDatabase() // Takes a while to run
}

async function doBackgroundTasks(){
	// Do stuff in the background
}

function main(){
	a = getData()
	doBackgroundTasks()
	// Wait for a to finish if it's still not done after background tasks
	await a 
}
</code></pre>
<p>In this case we have 2 keywords:</p>
<ol>
<li><code>async</code>: Used to declare a function as asynchronous</li>
<li><code>await</code>: Used to make the program stop and wait for an asynchronous function to finish</li>
</ol>
<p>*Please note I represented <code>main()</code> as a synchronous function, some runtimes will still require you to declare it as an <code>async</code> function, and <code>await</code> it somehow</p>
<p>If we were to look at a diagram of how this would execute it would be something like this:
<a href="../async-diagram.excalidraw" class="internal alias" data-slug="async-diagram.excalidraw">1200</a></p>
<p>However it‚Äôs also possible to have:</p>
<p><a href="../async-diagram-2.excalidraw" class="internal alias" data-slug="async-diagram-2.excalidraw">1200</a>
In this case <code>getData()</code> finished early, so when <code>await</code> is called it‚Äôs already done and execution continues. The most complicated parts of asynchronous programming are that things can run out-of-order. This is a benefit in terms of performance, but can often lead to bugs (such as those discussed in <a href="#dining-philosophers" class="internal alias">Dining Philosophers</a>).</p>
<p>Here is an example in python:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> random</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> asyncio </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Used to make managing async functions easier</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> get_data</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">():</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;get_data() running&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> asyncio.sleep(random.randint(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">15</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">))</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;get_data() done&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> &quot;data&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> do_background_tasks</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">():</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;do_background_tasks() running&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    ...</span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"> # Do stuff in the background</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;do_background_tasks() done&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> main</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">():</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">    # A TaskGroup is an easy way to start multiple async functions</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> with</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> asyncio.TaskGroup() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">as</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> tg:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        a </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> tg.create_task(get_data())</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        tg.create_task(do_background_tasks())</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    </span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(a.result())</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">if</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> __name__</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> ==</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> &quot;__main__&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    asyncio.run(main())</span></span></code></pre></figure>
<p>Which prints:</p>
<pre><code>get_data() running
do_background_tasks() running
do_background_tasks() done
get_data() done
data
</code></pre>
<h2 id="multiprocessing">Multiprocessing<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#multiprocessing" class="internal alias"> ¬ß</a></h2>
<p>When your operating system starts an application it will setup a process. This process is the running version of the application. As such, one method of parallelism that exists is to run multiple processes. This is often a good choice if you want the tasks not just to run more efficiently, but if there are external time factors that mean you must run them simultaneously.</p>
<p>If you imagine for example you write an application that is an automated scraper to purchase tickets to a concert. Let‚Äôs say you want to buy 5 tickets, and you have 10 seconds before they sell out. With threads you would switch back and forth between each thread, so if each thread takes a while to startup, you may miss your window. Instead if you launch 5 separate processes, they all can run on separate cores on a machine, and run simultaneously. Please keep in mind that not all things in computing that are called multiprocessing work this way. Sometimes multiple processes can end up running on the same core, and at that point it‚Äôs no better than threading (arguably worse since it uses more resources than threads).</p>
<p>Here is an example of multiprocessing in python (please note that since each process is a separate python instance it is possible for this to run in parallel or concurrently depending on architecture):</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> multiprocessing </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> Process</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> time</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> random</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> task</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(identifier: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Started #</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">identifier</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> at </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">time.ctime()</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    time.sleep(random.randint(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">10</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">))</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Ended #</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">identifier</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> at </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">time.ctime()</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    </span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">if</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> __name__</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> ==</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> '__main__'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    processes </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> []</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> index </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">10</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        process </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> Process(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">target</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">task, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">args</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(index,))</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        process.start()</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        processes.append(process)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> process </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> processes:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        process.join()</span></span></code></pre></figure>
<p>Since they all run at the same time they can finish in any order. For example here is what I got:</p>
<pre><code>Started #0 at Tue Dec 10 03:28:47 2024
Started #1 at Tue Dec 10 03:28:47 2024
Started #2 at Tue Dec 10 03:28:47 2024
Started #3 at Tue Dec 10 03:28:47 2024
Started #4 at Tue Dec 10 03:28:47 2024
Started #5 at Tue Dec 10 03:28:47 2024
Started #6 at Tue Dec 10 03:28:47 2024
Started #7 at Tue Dec 10 03:28:47 2024
Started #8 at Tue Dec 10 03:28:47 2024
Started #9 at Tue Dec 10 03:28:47 2024
Ended #4 at Tue Dec 10 03:28:48 2024
Ended #3 at Tue Dec 10 03:28:49 2024
Ended #0 at Tue Dec 10 03:28:50 2024
Ended #2 at Tue Dec 10 03:28:51 2024
Ended #5 at Tue Dec 10 03:28:52 2024
Ended #6 at Tue Dec 10 03:28:53 2024
Ended #7 at Tue Dec 10 03:28:53 2024
Ended #8 at Tue Dec 10 03:28:54 2024
Ended #9 at Tue Dec 10 03:28:55 2024
Ended #1 at Tue Dec 10 03:28:57 2024
</code></pre>
<h2 id="threading">Threading<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#threading" class="internal alias"> ¬ß</a></h2>
<p>Multi-threading is a technique in which you create multiple ‚Äúthreads‚Äù. A ‚Äúthread‚Äù is a separated area inside a process that lets you run code. There are two types of threads:</p>
<ol>
<li><strong>OS threads</strong>: This is a heavy weight type of thread that is created in the operating system Kernel, and managed by it</li>
<li><strong>Green/virtual Threads</strong>: These are ‚Äúthreads‚Äù that are much more lightweight and are managed in user space, typically by the language they are implemented in</li>
</ol>
<p>For the most part in modern programming green/virtual threads are used, and so that‚Äôs what I‚Äôll discuss here. In many implementations threads are essentially a second copy of a program that will run until some sort of ‚Äúyield‚Äù point, at which point they will let another thread run. These yield points can be implemented various ways, such as with hardcoded time-slots, or more controllable implementations like ‚Äúinterrupts‚Äù (i.e. switch when doing I/O like opening a file). There are a few different approaches to creating threads, and thread management. For creating threads there are 2 main common approaches.</p>
<h3 id="start-and-join">start() and join()<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#start-and-join" class="internal alias"> ¬ß</a></h3>
<p>The first is to manage threads individually. For example you pass the thread a callback function (something to run), with it‚Äôs arguments, and then <code>start()</code> the thread. From there you let it run, and <code>join()</code> the thread to wait for it to end. For example lets say you have an app where you select a bunch of files to download, then you have to digitally ‚Äúsign‚Äù with your information to confirm you downloaded the files. Let‚Äôs say you need to get the URL‚Äôs for each file before you can download them. You could do something like:</p>
<pre><code>function getFileURLs(filenames: list[str]){
	result = []
	for file in filenames{
		fileURL = getURLbyFilename(file)
		result.add(fileURL)
	}
}

function downloadFiles(fileURLs:list[str]){
	for url in fileURLs{
		download(url)
	}
}

function sign(name:str, token:str) -> bool{
	isValid = signForDocment(name, token)
	return isValid
}

function main(){
	filenames = [&quot;file1.png&quot;, &quot;file2.jpg&quot;, &quot;file3.docx&quot;]
	thread = Thread(callback=getFileURLs, arguments = [filenames])

	thread.start()
	// Can ask the user for their name and token while getting the URL's
	name = askUserforName()
	token = getTokenByName(name)
	 
	valid = sign(name, token)
	
	if valid{
		result = thread.join()
		downloadFiles(result)
	} else{
		error(&quot;Unable to sign for files&quot;)
	}
}
</code></pre>
<p>Here is an example of this code in python:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> random</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> time</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> typing </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> List</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> uuid</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> download</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(filename:</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) -> </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">bool</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;inside download()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    time.sleep(random.randint(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">))</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Finishing download()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> random.choice([</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">True</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">False</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">])</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> sign_for_docment</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(name:</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, token:</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) -> </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">bool</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;inside sign_for_docment()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    time.sleep(random.randint(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">))</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Finishing sign_for_docment()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> random.choice([</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">True</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">False</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">])</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> get_file_urls</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(filenames:List[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">], result:List[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]) -> List[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]:</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;inside get_file_urls()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    time.sleep(random.randint(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">4</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">15</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">))</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;"> file</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> filenames:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        result.append(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;/path/to/</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">file</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Finishing get_file_urls()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> result</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> download_files</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(fileURLs:list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]):</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;inside download_files()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> url </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> fileURLs:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        download(url)</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Finishing download_files()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> sign</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(name:</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, token:</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) -> </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">bool</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;inside sign()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    isValid </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> sign_for_docment(name, token)</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Finishing sign()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> isValid</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> ask_user_for_name</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">() -></span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;inside ask_user_for_name()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Finishing ask_user_for_name()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> &quot;name&quot;</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> get_token_by_name</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(name:</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) -> </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;inside get_token_by_name()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Finishing get_token_by_name()&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(uuid.uuid4())</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">if</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> __name__</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> ==</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> &quot;__main__&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    filenames </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> [</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;file1.png&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;file2.jpg&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;file3.docx&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> []</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    thread </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Thread(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">target</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">get_file_urls, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">args</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(filenames,result))</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    thread.start()</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;thread is running!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    name </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> ask_user_for_name()</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    token </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> get_token_by_name(name)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    valid </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> sign(name, token)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> valid:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        thread.join()</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">        print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;thread is done!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        download_files(result)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    else</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        raise</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Exception</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Unable to sign for files&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line> </span></code></pre></figure>
<h3 id="thread-manager">Thread Manager<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#thread-manager" class="internal alias"> ¬ß</a></h3>
<p>In every language there are various thread managers. Thread managers (often called executors or pools) are systems that help you run threads and manage them more easily. In python there are several thread managers, a common one is <a href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" class="external"><code>ThreadPoolExecutor</code></a>. This can be used to run a ton of tasks much more simply without having to explicitly <code>start()</code> and <code>join()</code> each thread:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> time</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> random</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> concurrent.futures</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> task</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(identifier:</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;inside task() #</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">identifier</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    time.sleep(random.randint(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">10</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">))</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;done task() #</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">identifier</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">with</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> concurrent.futures.ThreadPoolExecutor(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">max_workers</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">4</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">as</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> pool:</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> index </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">20</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        pool.submit(task, index)</span></span></code></pre></figure>
<p>Which prints something like:</p>
<pre><code>inside task() #0
inside task() #1
inside task() #2
done task() #2
inside task() #3
inside task() #4
done task() #1
inside task() #5
done task() #0
inside task() #6
done task() #5
inside task() #7
done task() #4
inside task() #8
done task() #7
inside task() #9
done task() #3
inside task() #10
done task() #6
inside task() #11
done task() #11
inside task() #12
done task() #12
inside task() #13
done task() #10
inside task() #14
done task() #9
inside task() #15
done task() #15
inside task() #16
done task() #8
inside task() #17
done task() #16
inside task() #18
done task() #13
inside task() #19
done task() #17
done task() #14
done task() #18
done task() #19
</code></pre>
<h2 id="concurrency-vs-parallelism">Concurrency vs Parallelism<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#concurrency-vs-parallelism" class="internal alias"> ¬ß</a></h2>
<p>Concurrent execution is just switching back and forth between threads/processes, whereas parallel execution is when multiple threads/processes are running at the same time. In order for something to be parallel there needs to be support at a hardware level. Additionally parallelism tends to take more resources, and is harder to <a href="#synchronization" class="internal alias">synchronize</a>. For example a system with multiple processor cores for separate processes to run in.</p>
<p><a href="../concurrency-parallelism.excalidraw" class="internal alias" data-slug="concurrency-parallelism.excalidraw">1200</a></p>
<h2 id="synchronization">Synchronization<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#synchronization" class="internal alias"> ¬ß</a></h2>
<p>Accessing variables can become complicated in concurrent and parallel contexts. There a major issue can come up, data races. A data race is when multiple processes try to access and modify shared data. This can lead to the data being corrupted, or just incorrect. As a simple example consider a shopping system that processes payments:</p>
<pre><code>current_id

function increment_id(){
	global current_id
	for 0..1000{
		current_id += 1
	}
}

function main(){
	t1 = thread(increment_id)
	t2 = thread(increment_id)
	t3 = thread(increment_id)
	t4 = thread(increment_id)
	
	t1.start()
	t2.start()
	t3.start()
	t4.start()

	t1.join()
	t2.join()
	t3.join()
	t4.join()
	
	print(f&quot;Final counter value: {counter}&quot;)
}

</code></pre>
<p>In python it‚Äôs much harder than other languages to cause a race condition. Python has a mechanism called the <a href="https://realpython.com/python-gil/" class="external alias">GIL</a> that makes it hard to cause one. Instead I modified the counter example with a ‚Äúshared resource‚Äù (a text file). Here is the code:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> time</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> random</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> increment</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">():</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    with</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> open</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;counter.txt&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">as</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> c:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        counter </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(c.read())</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">        print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Opened with count = </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">counter</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    time.sleep(random.random())</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> _ </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        counter </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">+=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 1</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    with</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> open</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;counter.txt&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;w+&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">as</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> c:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        c.write(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(counter))</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Closed with count = </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">counter</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">threads </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> []</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> _ </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">15</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    t </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Thread(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">target</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">increment)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    t.start()</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    threads.append(t)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> t </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threads:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    t.join()</span></span></code></pre></figure>
<p>With the output:</p>
<pre><code>Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Opened with count = 0
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
Closed with count = 1000000
</code></pre>
<h3 id="synchronization-primitives">Synchronization Primitives<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#synchronization-primitives" class="internal alias"> ¬ß</a></h3>
<p>When programming there are many synchronization primitives, which are tools used to make synchronization possible in concurrent and parallel contexts. This helps avoid data races.</p>
<h4 id="terminology">Terminology<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#terminology" class="internal alias"> ¬ß</a></h4>
<p>When looking at synchronization it‚Äôs worthwhile to know a few terms to be able to understand some of the content:</p>
<ul>
<li><strong>Mutual Exclusion</strong>: This is a fancy term to say that only 1 thing can happen at a time. If you have code that is mutually exclusive, then two threads cannot access it simultaneously.</li>
<li><strong>Deadlocks/Livelocks</strong>: When you manage to make your code get stuck, usually because every thread is waiting on a resource that has been permanently locked by accident. A deadlock means there are no operations running in the threads, a livelock is when there are operations running, but the thread can‚Äôt continue</li>
<li><strong>Sections</strong>: When talking about code in concurrent/parallel contexts we often break it up into discrete sections
<ul>
<li><strong>Entry Section</strong>: The code that happens before the critical section, essentially the code that runs to setup the critical section, typically this is where any <a href="#mutex" class="internal alias">locks</a> are acquired</li>
<li><strong>Critical section</strong>: This refers to a part of the code that accesses a resource that is shared. Essentially this part of the code that does work, and should have a limited number of threads accessing it</li>
<li><strong>Exit section</strong>: The code that cleans up after the critical section, this typically is where <a href="#mutex" class="internal alias">locks</a> are released</li>
</ul>
</li>
</ul>
<h4 id="dining-philosophers">Dining Philosophers<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#dining-philosophers" class="internal alias"> ¬ß</a></h4>
<p>Avoiding data races is important, but another problem comes up depending on your solution, <strong>Deadlocks/Livelocks</strong>. This is when you implement a synchronization system that makes it possible to get ‚Äústuck‚Äù (locked). As an example imagine table where there are philosophers sitting at a table. The philosophers can either <code>think()</code> or <code>eat()</code>. When philosophers want to <code>eat()</code> they must pick up a chopstick on the right, and left hand side of them:</p>
<pre><code>function think(){
	... // think 
}

function eat(){
	while not both_copsticks:
		if is_available(right_chopstick) and not_in_hand(right_chopstick):
			pickup_chopstick(left_chopstick)
		if is_available(left_chopstick) and not_in_hand(left_chopstick):
			pickup_chopstick(left_chopstick)
	eat_food()
	put_down_chopsticks(left_chopstick, right_chopstick)
}
</code></pre>
<p>Lets say you have a table of 6 philosophers, and 6 chopsticks. It is possible to have a situation where every chopstick is picked up, but no one can <code>eat()</code>, meaning they all get stuck in a loop waiting for another chopstick. This stuck state is called a deadlock:
<a href="../dining-philosophers.excalidraw" class="internal alias" data-slug="dining-philosophers.excalidraw">1200</a>
If each philosopher enters <code>eat()</code> at the same time, they will pick up the chopstick to their right, and be endlessly stuck waiting for the left chopstick, which will never be available. This analogy can apply to any <strong>shared resource</strong>.</p>
<h4 id="mutex">Mutex<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mutex" class="internal alias"> ¬ß</a></h4>
<p>A mutex (or spinlock) is a synchronization primitive that allows threads/processes to <code>acquire()</code> (or <code>lock()</code>) and <code>release()</code> (or <code>unlock()</code>) it. You can imagine this like being given a key to enter. When you <code>acquire()</code> the key, you can enter, and then you <code>release()</code> the key back to the next person who needs it. The most important thing to keep in mind is that for a mutex to work properly, the <code>acquire()</code> must be <strong>atomic</strong>. This is typically done in hardware, and ensures that it is not possible for two threads to simultaneously <code>acquire()</code>. For example:</p>
<pre><code>counter = 0 // Shared resource

function increment(){
	// Entry section
	mutex.acquire() // Wait on mutex
	 
	// Critical section
	counter += 1
	
	// Exit section
	mutex.release()
}

threads = []

for 0..5{
	t = Thread(increment)
	t.start()
	threads.add(t)
}

for thread in threads{
	thread.join()
}

</code></pre>
<p>Here is that same example in python:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Shared resource</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">counter </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 0</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Create a lock</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">mutex </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Lock()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> increment_counter</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">():</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    global</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> counter</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> _ </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        # Entry Section</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        mutex.acquire() </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Acquire the lock before modifying the shared resource</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        try</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">            # Critical Section</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            counter </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">+=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 1</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        finally</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">            # Exit section</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            mutex.release() </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Release the lock</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Create multiple threads</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">threads </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> []</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> _ </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">5</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># 5 threads</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    t </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Thread(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">target</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">increment_counter)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    threads.append(t)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    t.start()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Wait for all threads to complete</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> t </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threads:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    t.join()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Final counter value: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">counter</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span></code></pre></figure>
<p>Keep in mind you can have multiple <strong>separate</strong> mutexes if you need them.</p>
<h4 id="condition-variable">Condition Variable<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#condition-variable" class="internal alias"> ¬ß</a></h4>
<p>A condition variable is a system to signal to threads and wake them up. This comes up typically in the <strong>producer-consumer (or readers-writers) problem</strong>, where you have producers that produce data that consumers need to consume (i.e. email clients producing emails that the email server needs to send). In these cases the threads for the consumer spend a lot of time waiting if there is nothing being produced.</p>
<p>There are typically two solutions to this:</p>
<ol>
<li><strong>Long polling</strong>: Waiting by making the consumer threads <code>sleep()</code> for a set amount of time, and then checking if they have anything to do</li>
<li><strong>Condition variables</strong>: An efficient system that is used to <code>notify()</code> threads, and wake them up only when they have something to do</li>
</ol>
<p>A condition variable will have 2 functions typically <code>notify()</code> and <code>wait()</code>. <code>wait()</code> will make the thread sit idle until <code>notify()</code> is called from somewhere else in the code. This is much more efficient than sleeping for a set interval (long polling) for a few reasons:</p>
<ol>
<li>Even a sleep like 100ms can massively slowdown systems of thousands of threads</li>
<li>Consumer threads run <strong>exactly</strong> when they need to, without any wasted time</li>
</ol>
<p>Here is a long polling example:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> time</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Shared data</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> []</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">mutex </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Lock()  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Lock to protect shared data</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Producer function</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> producer</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">():</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    global</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> i </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">5</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Produce 5 items</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        with</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> mutex:</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">            print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Producer: Adding item </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">i</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            data.append(i)  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Produce an item</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        time.sleep(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Simulate time taken to produce</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Consumer function</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> consumer</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">():</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    global</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> _ </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">5</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Consume 5 items</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        while</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> True</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">            with</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> mutex:</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">                if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data:  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Check if there's data to consume</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">                    item </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data.pop(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">                    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Consumer: Consumed item </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">item</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">                    break</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            time.sleep(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">0.1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Wait before checking again (long-polling delay)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Create and start the threads</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">producer_thread </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Thread(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">target</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">producer)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">consumer_thread </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Thread(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">target</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">consumer)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">producer_thread.start()</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">consumer_thread.start()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Wait for both threads to complete</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">producer_thread.join()</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">consumer_thread.join()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;All items have been produced and consumed.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span></code></pre></figure>
<p>You can see in this example  the consumer is waiting a set amount of time between checking if data is available. Compare this to the condition variable version:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> time</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Shared data</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> []</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">condition </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Condition()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Producer function</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> producer</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">():</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    global</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> i </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">5</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Produce 5 items</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        with</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> condition:</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">            print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Producer: Adding item </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">i</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            data.append(i)  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Produce an item</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            condition.notify()  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Notify the consumer</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        time.sleep(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Simulate time taken to produce</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Consumer function</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> consumer</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">():</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    global</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> _ </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">5</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Consume 5 items</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        with</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> condition:</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">            while</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> not</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data:  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Wait until there is data</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">                condition.wait()</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            item </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data.pop(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Consume the item</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">            print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Consumer: Consumed item </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">item</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Create and start the threads</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">producer_thread </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Thread(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">target</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">producer)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">consumer_thread </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Thread(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">target</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">consumer)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">producer_thread.start()</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">consumer_thread.start()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Wait for both threads to complete</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">producer_thread.join()</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">consumer_thread.join()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;All items have been produced and consumed.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span></code></pre></figure>
<p>This is much more efficient because the consumer context manager (<code>with condition</code> inside <code>consumer()</code>), only runs when <code>condition.notify()</code> is called in <code>producer()</code>, otherwise the <code>consumer()</code> thread is doing nothing and wasting no CPU time sleeping.</p>
<h4 id="semaphore">Semaphore<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#semaphore" class="internal alias"> ¬ß</a></h4>
<p>A semaphore is similar to a <a href="#mutex" class="internal alias">mutex</a>, but it allows for more than 1 thing to access the critical section/shared resource at a time. For example let‚Äôs say you can have up to 3 threads simultaneously accessing a server, you can setup a semaphore with an initial value of 3, and at any given time at most 3 threads will access it.</p>
<p>Semaphores have various implementations, but in general they have some sort of a <code>value</code> (sometimes called <code>count</code>), which is an integer that indicates how many things can currently access the critical section/shared resource. In these examples I also used a <a href="#condition-variable" class="internal alias">condition variable</a> to wake up threads, but you can also just sleep after the operations (though this can slow down your program a lot, and cause many out-of-order executions). Semaphores have 2 methods, <code>wait()</code> and <code>signal()</code> (sometimes called other things like <code>notify()</code> instead of <code>signal()</code>).</p>
<p>Wait will:</p>
<pre><code>class Semaphore{
	function wait(){
		// Wait for resource to be available
		while self.value &lt;= 0{
			self.condition.wait()
		}
		self.value -= 1 // Decrement now you're allowed access to the resource
	}
}
</code></pre>
<p>Meaning you have to sit and wait, until <code>Semaphore.value</code> goes above 0, at which point you‚Äôre allowed in to the critical section/allowed to accessed shared resource, and need to decrement the value as you enter. Now that you‚Äôre done waiting, once finished with the critical section/access you will then <code>signal()</code> to indicate you‚Äôre done:</p>
<pre><code>class Semaphore{
	function signal(){
		self.value += 1
		self.condition.notify() // Tell another thread to wake up
	}
}
</code></pre>
<p>For example if you initialize a semaphore with a count of 3, then have 1 thread currently accessing the critical section/resource, you would end up with a count of 2 on the semaphore, until the thread is done.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">class</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Semaphore</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">    &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">    Semaphore represents a counting semaphore that controls access to a shared resource.&quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    def</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> __init__</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(self, initial_value:</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">        &quot;&quot;&quot;Initialize the semaphore with the given initial value</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">        Parameters</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">        ----------</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">        initial_value : int</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">            The initial value of the semaphore (essentially the capacity)</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">        &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.value </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> initial_value</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.mutex </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Lock()</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.condition </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threading.Condition(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.mutex)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> wait</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(self):</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">        &quot;&quot;&quot;Decrement the semaphore value, blocking if it would go below zero&quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        with</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.condition:</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">            while</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.value </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">&lt;=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">                self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.condition.wait()</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">            self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.value </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">-=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 1</span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">  # Decrement semaphore value under mutex protection</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> signal</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(self):</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">        &quot;&quot;&quot;Increment the semaphore value and wake one waiting thread&quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        with</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.condition:</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">            self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.value </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">+=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 1</span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">  # Increment semaphore value under mutex protection</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">            self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.condition.notify()  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Wake up one waiting thread</span></span></code></pre></figure>
<p>*<em>Please note that this semaphore is ‚Äúgenerally‚Äù safe, but I would recommend using [<code>threading.Semaphore()</code>](<a href="https://docs.python.org/3/library/threading.html#threading.Semaphore" class="external alias">threading ‚Äî Thread-based parallelism ‚Äî Python 3.13.1 documentation</a>) for any serious code</em></p>
<p>You can then test this out with:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> time</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> worker</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(semaphore, id):</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Worker </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{id}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> waiting...&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    semaphore.wait()</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Worker </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{id}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> working...&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    time.sleep(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Worker </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">{id}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> done.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    semaphore.signal()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">sem </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> Semaphore(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">2</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Semaphore with an initial value of 2</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">threads </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> [threading.Thread(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">target</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">worker, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">args</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(sem, index)) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> index </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> range</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">50</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)]</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> thread </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threads: </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Start threads</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    thread.start()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> thread </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> threads: </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Wait for them all to finish</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    thread.join()</span></span></code></pre></figure>
<p>You will watch the threads run 2 at a time:</p>
<pre><code>Worker 0 waiting...
Worker 0 working...
Worker 1 waiting...
Worker 1 working...
... // rest of workers waiting
Worker 48 waiting...
Worker 49 waiting...
Worker 0 done.
Worker 1 done.
Worker 2 working...
Worker 3 working...
Worker 2 done.
Worker 3 done.
Worker 4 working...
Worker 5 working...
... // Rest of workers taking turns
Worker 46 done.
Worker 47 done.
Worker 48 working...
Worker 49 working...
Worker 48 done.
Worker 49 done.
</code></pre>
<h2 id="additional-resources">Additional Resources<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#additional-resources" class="internal alias"> ¬ß</a></h2>
<ul>
<li>Dining philosophers
<ul>
<li><a href="https://www.geeksforgeeks.org/dining-philosopher-problem-using-semaphores/" class="external alias">Dining Philosopher Problem Using Semaphores - GeeksforGeeks</a></li>
<li>Solutions
<ul>
<li>Peterson‚Äôs Algorithm
<ul>
<li><a href="https://www.geeksforgeeks.org/petersons-algorithm-in-process-synchronization/" class="external alias">Peterson‚Äôs Algorithm in Process Synchronization - GeeksforGeeks</a></li>
<li><a href="https://www.youtube.com/watch?v=gYCiTtgGR5Q" class="external alias">Peterson‚Äôs Solution</a></li>
<li><a href="https://www.youtube.com/watch?v=7H4TNsxAlf4" class="external alias">Peterson‚Äôs Solution-Critical Section Problem-Operating Systems-20A05402T</a></li>
</ul>
</li>
<li>Synchronization
<ul>
<li><a href="https://www.youtube.com/watch?v=71dgtPrbToE" class="external alias">The Volatile and Synchronized Keywords in Java | Atomic Variables | Java Multithreading | Geekific</a></li>
<li>Mutex
<ul>
<li><a href="https://www.youtube.com/watch?v=1tZhmTnk-vc" class="external alias">how does a Mutex even work? (atoms in the computer??)</a></li>
<li>Implementing Mutexes
<ul>
<li><a href="https://en.wikipedia.org/wiki/Test-and-set" class="external alias">Test-and-set - Wikipedia</a></li>
<li><a href="https://gist.github.com/mepcotterell/8df8e9c742fa6f926c39667398846048" class="external alias">Implementing a Mutex</a></li>
<li><a href="https://www.cs.princeton.edu/courses/archive/fall08/cos318/lectures/Lec6-MutexImplementation.pdf" class="external alias">Lec6-MutexImplementation</a></li>
<li>[CSCI 0300/1310: Fundamentals of Computer Systems](<a href="https://cs.brown.edu/courses/csci0300/2022/notes/l21.html#:~:text=Internally%2C%20a%20mutex%20can%20be,lock()" class="external">https://cs.brown.edu/courses/csci0300/2022/notes/l21.html#:~:text=Internally%2C%20a%20mutex%20can%20be,lock()</a></li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=jkRN9zcLH1s" class="external alias">Mutex vs Synchronization</a>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Mutual_exclusion" class="external alias">Mutual exclusion - Wikipedia</a></li>
</ul>
</li>
<li>Implementations &amp; Documentation
<ul>
<li><a href="https://www.ibm.com/docs/en/aix/7.1?topic=programming-using-mutexes" class="external alias">Using mutexes - IBM Documentation</a></li>
<li><a href="https://www.felixcloutier.com/x86/lock" class="external alias">LOCK ‚Äî Assert LOCK# Signal Prefix</a> (<a href="https://en.wikipedia.org/wiki/X86_assembly_language" class="external alias">x86</a> instruction for locking)
<ul>
<li><a href="https://stackoverflow.com/questions/8891067/what-does-the-lock-instruction-mean-in-x86-assembly" class="external alias">c++ - What does the ‚Äúlock‚Äù instruction mean in x86 assembly? Stack Overflow</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Condition Variables
<ul>
<li><a href="https://www.youtube.com/watch?v=0sVGnxg6Z3k" class="external alias">Condition variables in C</a></li>
<li><a href="https://www.youtube.com/watch?v=P6Z5K8zmEmc" class="external alias">How to write a multithreaded webserver using condition variables (Part 3)</a></li>
<li><a href="https://www.youtube.com/watch?v=eQOaaDA92SI" class="external alias">Pthread Condition Variables</a></li>
<li><a href="https://www.youtube.com/watch?v=rMpOfbaP2PQ" class="external alias">Operating Systems Lecture 14: Condition variables</a></li>
<li><a href="https://stackoverflow.com/questions/47804723/how-exactly-does-the-wait-function-work-wrt-to-condition-variables" class="external alias">c - How exactly does the wait function work wrt to condition variables - Stack Overflow</a></li>
<li><a href="https://pages.cs.wisc.edu/~remzi/OSTEP/threads-cv.pdf" class="external alias">single.dvi</a></li>
<li><a href="https://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_cond_wait.html" class="external alias">pthread_cond_wait</a></li>
</ul>
</li>
<li>Semaphores
<ul>
<li><a href="https://www.youtube.com/watch?v=ukM_zzrIeXs" class="external alias">What is a semaphore? How do they work? (Example in C)</a></li>
<li>Written by me
<ul>
<li><a href="https://github.com/Descent098/projects-experiments/blob/master/Languages/Go/concurrency-testing/semaphore/semaphore.go" class="external alias">semaphore in go</a></li>
<li><a href="https://github.com/Descent098/projects-experiments/blob/master/Languages/Python/concurrency-testing/semaphore/sem.py" class="external alias">semaphore in python</a></li>
</ul>
</li>
<li><a href="https://www.britannica.com/technology/semaphore" class="external alias">Semaphore | Signaling, Telegraphy, Flags | Britannica</a></li>
<li><a href="https://www.geeksforgeeks.org/semaphores-in-process-synchronization/" class="external alias">Semaphores in Process Synchronization - GeeksforGeeks</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Race conditions
<ul>
<li>Dangers of getting this wrong
<ul>
<li><a href="https://www.youtube.com/watch?v=41Gv-zzICIQ" class="external alias">how a simple programming mistake ended 6 lives (youtube.com)</a>
<ul>
<li><a href="https://www.bugsnag.com/blog/bug-day-race-condition-therac-25/" class="external alias">The Worst Computer Bugs in History: Race conditions in Therac-25 | BugSnag Blog</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://www.embedded.com/programming-embedded-systems-race-conditions-and-how-to-avoid-them/" class="external alias">Programming embedded systems: Race conditions and how to avoid them - Embedded.com</a></li>
<li><a href="https://www.rookout.com/blog/fantastic-bugs-and-how-to-resolve-them-ep2-race-conditions/" class="external alias">Fantastic Bugs and How to Resolve Them Ep2: Race Conditions | Rookout</a></li>
<li><a href="https://medium.com/swlh/hacking-banks-with-race-conditions-2f8d55b45a4b" class="external alias">Hacking Banks With Race Conditions | by Vickie Li | The Startup | Medium</a></li>
</ul>
</li>
<li><a href="https://en.wikipedia.org/wiki/Amdahl%27s_law" class="external alias">Amdahl‚Äôs law - Wikipedia</a></li>
<li>Threads
<ul>
<li><a href="https://www.youtube.com/watch?v=7ENFeb-J75k" class="external alias">Multithreading Code - Computerphile</a></li>
<li><a href="https://www.youtube.com/watch?v=hwTYDQ0zZOw" class="external alias">CPU Cores VS Threads Explained</a></li>
<li><a href="https://www.youtube.com/watch?v=4rLW7zg21gI" class="external alias">FANG Interview Question | Process vs Thread</a></li>
<li><a href="https://www.youtube.com/watch?v=Dhf-DYO1K78" class="external alias">Process vs Thread</a></li>
</ul>
</li>
</ul></article></div><div class="right sidebar"><div class="graph "><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#asyncawait" data-for="asyncawait">Async/Await</a></li><li class="depth-0"><a href="#multiprocessing" data-for="multiprocessing">Multiprocessing</a></li><li class="depth-0"><a href="#threading" data-for="threading">Threading</a></li><li class="depth-1"><a href="#start-and-join" data-for="start-and-join">start() and join()</a></li><li class="depth-1"><a href="#thread-manager" data-for="thread-manager">Thread Manager</a></li><li class="depth-0"><a href="#concurrency-vs-parallelism" data-for="concurrency-vs-parallelism">Concurrency vs Parallelism</a></li><li class="depth-0"><a href="#synchronization" data-for="synchronization">Synchronization</a></li><li class="depth-1"><a href="#synchronization-primitives" data-for="synchronization-primitives">Synchronization Primitives</a></li><li class="depth-0"><a href="#additional-resources" data-for="additional-resources">Additional Resources</a></li></ul></div></div><div class="backlinks "><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/" target="_blank">Quartz v4.1.4</a>, ¬© 2024</p><ul><li><a href="https://github.com/descent098">GitHub</a></li><li><a href="https://linkedin.com/in/kieran-wood">LinkedIn</a></li><li><a href="https://kieranwood.ca">Main Site</a></li><li><a href="https://canadiancoding.ca">Canadian Coding</a></li><li><a href="https://kieranwood.ca/tech">Tech Blog</a></li><li><a href="https://kieranwood.ca/philosophy">Philosophy Blog</a></li></ul><script>document.querySelectorAll('img').forEach( 
  (image)=>{
      image.addEventListener('click', focusImage)
  }
)

function focusImage(){
  if (this.classList.contains('focusedImage')){
      document.exitFullscreen()
  }else{
      this.requestFullscreen()
  }
  this.classList.toggle('focusedImage')
}</script></footer></div></body><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="../postscript.js" type="module"></script></html>