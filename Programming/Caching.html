<!DOCTYPE html>
<html><head><title>Caching</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="Caching"/><meta property="og:description" content="A cache is basically a system where you store something you know you will need for later. Imagine you work in a bakery. If you wait until someone orders a loaf of bread to cook it, then now every person who comes into your store has to wait for you to cook the loaf before they can leave."/><meta property="og:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../static/icon.png"/><meta name="description" content="A cache is basically a system where you store something you know you will need for later. Imagine you work in a bakery. If you wait until someone orders a loaf of bread to cook it, then now every person who comes into your store has to wait for you to cook the loaf before they can leave."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../static/contentIndex.json").then(data => data.json())</script></head><body data-slug="Programming/Caching"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title "><a href="..">Computer Science Knowledge Base</a></h1><div class="spacer mobile-only"></div><div class="search "><div id="search-icon"><p>Search</p><div></div><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="darkmode "><input class="toggle" id="darkmode-toggle" type="checkbox" tabindex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;Databases&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Game-Dev-&amp;-Graphics&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Hardware&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;HCI-&amp;-VR&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Networking-&amp;-Webdev&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;OS-&amp;-Firmware&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Programming&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Security-&amp;-Cryptography&quot;,&quot;collapsed&quot;:true}]"><h1>Menu</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Databases"><button class="folder-button"><span class="folder-title">Databases</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Databases"><li><a href="../Databases/Basics" data-for="Databases/Basics">🌱Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Game-Dev-&amp;-Graphics"><button class="folder-button"><span class="folder-title">Game Dev &amp; Graphics</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Game-Dev-&amp;-Graphics"><li><a href="../Game-Dev-&amp;-Graphics/Basics" data-for="Game-Dev-&amp;-Graphics/Basics">🌱Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Hardware"><button class="folder-button"><span class="folder-title">Hardware</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Hardware"><li><a href="../Hardware/Basics" data-for="Hardware/Basics">🌱Basics/Intro</a></li><li><a href="../Hardware/RAM" data-for="Hardware/RAM">RAM</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="HCI-&amp;-VR"><button class="folder-button"><span class="folder-title">HCI &amp; VR</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="HCI-&amp;-VR"><li><a href="../HCI-&amp;-VR/Basics" data-for="HCI-&amp;-VR/Basics">🌱Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Networking-&amp;-Webdev"><button class="folder-button"><span class="folder-title">Networking &amp; Webdev</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Networking-&amp;-Webdev"><li><a href="../Networking-&amp;-Webdev/Basics" data-for="Networking-&amp;-Webdev/Basics">🌱Basics/Intro</a></li><li><a href="../Networking-&amp;-Webdev/HTTP" data-for="Networking-&amp;-Webdev/HTTP">HTTP</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="OS-&amp;-Firmware"><button class="folder-button"><span class="folder-title">OS &amp; Firmware</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="OS-&amp;-Firmware"><li><a href="../OS-&amp;-Firmware/Basics" data-for="OS-&amp;-Firmware/Basics">🌱Basics/Intro</a></li><li><a href="../OS-&amp;-Firmware/Unix-&amp;-Linux" data-for="OS-&amp;-Firmware/Unix-&amp;-Linux">Linux</a></li><li><a href="../OS-&amp;-Firmware/Userspace" data-for="OS-&amp;-Firmware/Userspace">Userspace</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Programming"><button class="folder-button"><span class="folder-title">Programming</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Programming"><li><a href="../Programming/Basics" data-for="Programming/Basics">🌱Basics/Intro</a></li><li><a href="../Programming/Caching" data-for="Programming/Caching">Caching</a></li><li><a href="../Programming/Compression" data-for="Programming/Compression">Compression</a></li><li><a href="../Programming/Concurrency-&amp;-Parallelism" data-for="Programming/Concurrency-&amp;-Parallelism">Concurrency &amp; Parallelism</a></li><li><a href="../Programming/Encodings" data-for="Programming/Encodings">Encodings</a></li><li><a href="../Programming/Open-Source-&amp;-Free-Software" data-for="Programming/Open-Source-&amp;-Free-Software">FOSS (Free and Open Source Software)</a></li><li><a href="../Programming/Hashing" data-for="Programming/Hashing">Hashing</a></li><li><a href="../Programming/Binary,-Hexadecimal-and-Number-Systems" data-for="Programming/Binary,-Hexadecimal-and-Number-Systems">Number Systems (binary &amp; hex)</a></li><li><a href="../Programming/Python" data-for="Programming/Python">Python</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Security-&amp;-Cryptography"><button class="folder-button"><span class="folder-title">Security &amp; Cryptography</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Security-&amp;-Cryptography"><li><a href="../Security-&amp;-Cryptography/Basics" data-for="Security-&amp;-Cryptography/Basics">🌱Basics/Intro</a></li><li><a href="../Security-&amp;-Cryptography/Whitehat,-Grey-Hat,-and-Black-Hat-Hacking" data-for="Security-&amp;-Cryptography/Whitehat,-Grey-Hat,-and-Black-Hat-Hacking">White, Grey &amp; Black Hat Hacking</a></li></ul></div></li><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container " aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../Programming/">Programming</a></div></nav><div class="explorer mobile-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;Databases&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Game-Dev-&amp;-Graphics&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Hardware&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;HCI-&amp;-VR&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Networking-&amp;-Webdev&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;OS-&amp;-Firmware&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Programming&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Security-&amp;-Cryptography&quot;,&quot;collapsed&quot;:true}]"><h1>Menu</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Databases"><button class="folder-button"><span class="folder-title">Databases</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Databases"><li><a href="../Databases/Basics" data-for="Databases/Basics">🌱Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Game-Dev-&amp;-Graphics"><button class="folder-button"><span class="folder-title">Game Dev &amp; Graphics</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Game-Dev-&amp;-Graphics"><li><a href="../Game-Dev-&amp;-Graphics/Basics" data-for="Game-Dev-&amp;-Graphics/Basics">🌱Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Hardware"><button class="folder-button"><span class="folder-title">Hardware</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Hardware"><li><a href="../Hardware/Basics" data-for="Hardware/Basics">🌱Basics/Intro</a></li><li><a href="../Hardware/RAM" data-for="Hardware/RAM">RAM</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="HCI-&amp;-VR"><button class="folder-button"><span class="folder-title">HCI &amp; VR</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="HCI-&amp;-VR"><li><a href="../HCI-&amp;-VR/Basics" data-for="HCI-&amp;-VR/Basics">🌱Basics/Intro</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Networking-&amp;-Webdev"><button class="folder-button"><span class="folder-title">Networking &amp; Webdev</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Networking-&amp;-Webdev"><li><a href="../Networking-&amp;-Webdev/Basics" data-for="Networking-&amp;-Webdev/Basics">🌱Basics/Intro</a></li><li><a href="../Networking-&amp;-Webdev/HTTP" data-for="Networking-&amp;-Webdev/HTTP">HTTP</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="OS-&amp;-Firmware"><button class="folder-button"><span class="folder-title">OS &amp; Firmware</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="OS-&amp;-Firmware"><li><a href="../OS-&amp;-Firmware/Basics" data-for="OS-&amp;-Firmware/Basics">🌱Basics/Intro</a></li><li><a href="../OS-&amp;-Firmware/Unix-&amp;-Linux" data-for="OS-&amp;-Firmware/Unix-&amp;-Linux">Linux</a></li><li><a href="../OS-&amp;-Firmware/Userspace" data-for="OS-&amp;-Firmware/Userspace">Userspace</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Programming"><button class="folder-button"><span class="folder-title">Programming</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Programming"><li><a href="../Programming/Basics" data-for="Programming/Basics">🌱Basics/Intro</a></li><li><a href="../Programming/Caching" data-for="Programming/Caching">Caching</a></li><li><a href="../Programming/Compression" data-for="Programming/Compression">Compression</a></li><li><a href="../Programming/Concurrency-&amp;-Parallelism" data-for="Programming/Concurrency-&amp;-Parallelism">Concurrency &amp; Parallelism</a></li><li><a href="../Programming/Encodings" data-for="Programming/Encodings">Encodings</a></li><li><a href="../Programming/Open-Source-&amp;-Free-Software" data-for="Programming/Open-Source-&amp;-Free-Software">FOSS (Free and Open Source Software)</a></li><li><a href="../Programming/Hashing" data-for="Programming/Hashing">Hashing</a></li><li><a href="../Programming/Binary,-Hexadecimal-and-Number-Systems" data-for="Programming/Binary,-Hexadecimal-and-Number-Systems">Number Systems (binary &amp; hex)</a></li><li><a href="../Programming/Python" data-for="Programming/Python">Python</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Security-&amp;-Cryptography"><button class="folder-button"><span class="folder-title">Security &amp; Cryptography</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Security-&amp;-Cryptography"><li><a href="../Security-&amp;-Cryptography/Basics" data-for="Security-&amp;-Cryptography/Basics">🌱Basics/Intro</a></li><li><a href="../Security-&amp;-Cryptography/Whitehat,-Grey-Hat,-and-Black-Hat-Hacking" data-for="Security-&amp;-Cryptography/Whitehat,-Grey-Hat,-and-Black-Hat-Hacking">White, Grey &amp; Black Hat Hacking</a></li></ul></div></li><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div><h1 class="article-title ">Caching</h1><p class="content-meta ">Dec 12, 2024, 16 min read</p><div class="toc mobile-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#memory-vs-storage" data-for="memory-vs-storage">Memory vs Storage</a></li><li class="depth-0"><a href="#a-note-about-the-examples" data-for="a-note-about-the-examples">A Note About The Examples</a></li><li class="depth-0"><a href="#simple-example-memoization" data-for="simple-example-memoization">Simple Example (memoization)</a></li><li class="depth-0"><a href="#pre-fetchespre-caches" data-for="pre-fetchespre-caches">Pre-fetches/Pre-caches</a></li><li class="depth-0"><a href="#layers-of-caches" data-for="layers-of-caches">Layers of Caches</a></li><li class="depth-1"><a href="#deviceos-cache" data-for="deviceos-cache">Device/OS Cache</a></li><li class="depth-1"><a href="#browser-cache" data-for="browser-cache">Browser Cache</a></li><li class="depth-1"><a href="#servercdn-cache" data-for="servercdn-cache">Server/CDN cache</a></li><li class="depth-1"><a href="#full-example" data-for="full-example">Full Example</a></li><li class="depth-0"><a href="#issues-with-caches" data-for="issues-with-caches">Issues With Caches</a></li><li class="depth-0"><a href="#cache-invalidation-strategies" data-for="cache-invalidation-strategies">Cache Invalidation Strategies</a></li><li class="depth-1"><a href="#fixed-length" data-for="fixed-length">Fixed-length</a></li><li class="depth-1"><a href="#time-basedttl" data-for="time-basedttl">Time-based/TTL</a></li><li class="depth-1"><a href="#updatepush-based" data-for="updatepush-based">Update/Push-based</a></li><li class="depth-1"><a href="#event-based" data-for="event-based">Event Based</a></li><li class="depth-0"><a href="#resources" data-for="resources">Resources</a></li></ul></div></div></div></div><article class="popover-hint"><p>A cache is basically a system where you store something you know you will need for later. Imagine you work in a bakery. If you wait until someone orders a loaf of bread to cook it, then now every person who comes into your store has to wait for you to cook the loaf before they can leave.</p>
<p><img src="../img/programming/caching/bakery-caching.png" width="auto" height="auto"/></p>
<p>Instead if there’s usually 10 people who come in to buy loaves of bread, you can pre-cook them, and have them ready to buy. This skips the whole baking time waiting because you’ve already done it ahead of time. At worst if you’re out of pre-made bread, it takes the same amount of time as the original bakery
<img src="../img/programming/caching/bakery-caching-2.png" width="auto" height="auto"/></p>
<p>A cache is the same idea. Let’s say you have a website with 25 pages, instead of having to open the file every time a user asks for the page you could just read the most popular pages (let’s say 10) and store them in memory. This way whenever people ask for those pages you don’t have to go and fetch them because you can just grab them from memory.</p>
<h2 id="memory-vs-storage">Memory vs Storage<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#memory-vs-storage" class="internal alias"> §</a></h2>
<p>Storage in the context of this article is used to describe data that is stored persistently on SSD (solid-state drive(s)) and/or HDD (Hard-Disk Drives). You will see the word memory used a lot in this page, this is referring to system memory, which is a combination of RAM (Random Access Memory) and Level Caches. There are three major distinctions between memory and storage</p>
<ol>
<li><strong>Capacity</strong>: Memory has significantly less overall size compared to storage</li>
<li><strong>Speed</strong>: while memory has less it can store, it can retrieve and store data much faster than storage</li>
<li><strong>Volatility</strong>: Memory is volatile meaning it is wiped whenever the parts are no longer receiving electricity, unlike storage which is etched into the disk</li>
</ol>
<p><img src="../img/programming/caching/storage-vs-memory.png" width="auto" height="auto"/></p>
<h2 id="a-note-about-the-examples">A Note About The Examples<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a-note-about-the-examples" class="internal alias"> §</a></h2>
<p>The examples all have a fake database system. This is not real code that will run. This would be replaced with however you actually access your data in code. It’s just there to help illustrate a point. Here are the functions and the info about them</p>
<ul>
<li><code>database.connect()</code>; Returns an object with the database that has <code>.get(table, key)</code> and <code>.store(table, key, value)</code> methods</li>
<li><code>db.get(table,key)</code>; A method on the database object that gets the information from a specified table with a given key. For example <code>db.get(&quot;user&quot;, userID)</code> gets data from the user table that has a given user ID</li>
<li><code>db.store(table, key, value)</code>; A method on the database object that stores information in a given table for a given key with a given value. For example <code>db.store(&quot;user&quot;, user_id, data)</code>, stores a key at <code>user_id</code> in the <code>user</code> table with the <code>data</code> provided</li>
</ul>
<h2 id="simple-example-memoization">Simple Example (memoization)<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#simple-example-memoization" class="internal alias"> §</a></h2>
<p>One of the simplest forms of caching is called memoization. Essentially you can have a function that takes in some parameters, and on the first run store the result in something like a hashmap/dictionary/list/array to look up the next time the function is called with the same parameters. For example let’s say you have a function that gets data about a user from a database by an id (an integer). Something like this:</p>
<p><code>js</code></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="javascript" data-theme="github-dark github-light"><code data-language="javascript" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> getUser</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">userID</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">){          </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Connect and get database object    </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">connect</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">();       </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Query for user and return data    </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> db.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, userID);</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span></code></pre></figure>
<p><code>python</code></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> get_user</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(user_id: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):     </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Connect and get database object    </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.connect()     </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Query for user and return data    </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> db.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, user_id)</span></span></code></pre></figure>
<p>In these two snippets there’s some sort of database system we need to connect to, then query for the data, and return it. This is fine, but what if we have 1000 queries at once? or the database is in one country, and the server is in another? We now have to wait for the connection every time. Often with something like this we might be making duplicate calls, like for example if there’s a profile page, or some user data that shows up across an app (profile pic etc.). What if instead we could store the results of the queries so that even just duplicate queries don’t need to happen. Here’s how we could do this:</p>
<p><code>js</code></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="javascript" data-theme="github-dark github-light"><code data-language="javascript" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> users</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Map</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Store results of user queries</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> getUser</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">userID</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">){</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">!</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">has</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID)){ </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// New ID</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Connect and get database object</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">connect</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(); </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Query for user</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> db.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, userID);</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Store data for next time</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">set</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID, data)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    } </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">else</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">{</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    }</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span></code></pre></figure>
<p><code>python</code></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">users </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">() </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Store results of user queries</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> get_user</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(user_id: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    user_data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users.get(user_id, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">False</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> not</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> user_data: </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># New user ID</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        # Connect and get database object</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.connect() </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        # Query for user</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> db.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, user_id)</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        # Store for next time</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        users[user_id] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    else</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> user_data</span></span>
<span data-line> </span></code></pre></figure>
<p>So if we called the function with the user ID 1, it will check if 1 exists in the map/dictionary, since it’s empty at the start it will then go and connect to the database, get the data and add it to the map/dictionary. Later on if we called the function again with the ID of 1 it would check the map/dictionary, see the value and just return it right away.</p>
<p>Python does have a built in one-liner to do this sort of thing inside <a href="https://docs.python.org/3/library/functools.html#functools.cache" class="external alias">the functools package</a>.</p>
<h2 id="pre-fetchespre-caches">Pre-fetches/Pre-caches<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pre-fetchespre-caches" class="internal alias"> §</a></h2>
<p>Memoization is great, but there are tons of other caching strategies that can be more useful. For example let’s say you run a ticket app for buying movie tickets. If most people will buy a ticket 1 hour in advance of the showtime, you might want to cache the data for each movie in the system 1 hour before showtime since it’s likely to be needed then.</p>
<p>This method is called pre-fetching. Essentially you are guessing based on trends when you will need data, and preparing the most likely data you will need ahead of time. This can help in systems where you might end up with a lot of stress all at once, like for example game servers where the most popular time iis 5-8pm in each country because that’s when people get home from work/school. So you can rotate prefetching server data for each country around when this peak time is!</p>
<h2 id="layers-of-caches">Layers of Caches<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#layers-of-caches" class="internal alias"> §</a></h2>
<p>There is rarely a system you will run into that only has one cache. There will often be multiple caches for multiple purposes interacting with each other. You might make a request for a webpage that compiles it’s data from a few dozen caches all at once.</p>
<p>Let’s examine what might happen for example when using a browser to get a webpage.</p>
<h3 id="deviceos-cache">Device/OS Cache<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#deviceos-cache" class="internal alias"> §</a></h3>
<p>Your operating system on the device you’re using to read this article will have tons of caches built in. These device/OS caches have tons of use cases. For example you may cache the information of bluetooth devices you have connected to in the past, so you don’t have to re-ask the device for it’s information every time you pair it.</p>
<h3 id="browser-cache">Browser Cache<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#browser-cache" class="internal alias"> §</a></h3>
<p>Now that you have the device level caches, the browser itself will often have it’s own caches. It might maintain stored information about you (passwords, name, address etc.), <a href="https://www.cloudflare.com/en-ca/learning/dns/what-is-dns/" class="external alias">DNS information</a>, and even caches of pages you’ve recently visited, so it doesn’t have to even go to the network for every request.</p>
<h3 id="servercdn-cache">Server/CDN cache<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#servercdn-cache" class="internal alias"> §</a></h3>
<p>Now that you’ve made the request for a page on the browser, the page you get returned back, might even just be a cache. Sometimes this comes in the form of caching like we’ve seen (memoization etc.), or it might use a CDN. A CDN is basically a system that exists just to store static (unchanging) content to be distributed to users quickly. This means static pages are stored, and the server running the app doesn’t even get asked for the content, instead the CDN just gives it old cached copies.</p>
<h3 id="full-example">Full Example<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#full-example" class="internal alias"> §</a></h3>
<p>So if we were to request <a href="https://schulichignite.com/" class="external alias">https://schulichignite.com</a> for example in a browser, here are some caches we <strong>might</strong> run into:</p>
<ol>
<li>Your OS cache for DNS; DNS is the system that turns domain names (like schulichignite.com) into something useful for your computer (IP address). Your operating system will typically have an internal cache for common DNS entries (google, microsoft etc.). Likewise there will be some caching as part of your home network and how you connect to the internet.</li>
<li>Your browser cache; Next as your browser is making the request it might use the <strong>browser’s</strong> DNS cache to see if you’ve visited the domain before, and will use the stored value instead. On top of that even if it does go to the DNS it will also check the <em>page cache</em> in your browser to see if you’ve been to the site recently, and if you have to show you a cached copy it stores on your device.</li>
<li>Server caches; Now assuming you didn’t get served the page from the browser’s cache you may find that the server you request the page from has the page stored in one of it’s caches, or in a CDN. At this point it will return the cached version of the page back to you, and your browser will take the response and cache it so it will load from disk next time.</li>
</ol>
<p>At this point just making that one request could be 10’s to 100’s of caches that are returning your value. Theoretically speaking you might end up with a request that actually isn’t processed at all with the typical code and the whole experience is just retrieved from a cache!</p>
<h2 id="issues-with-caches">Issues With Caches<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#issues-with-caches" class="internal alias"> §</a></h2>
<p>We’ve talked about adding to caches, but the big problem with caches is <em>cache invalidation</em>. We’re fundamentally storing data about a thing in the assumption that the data should stay the same, and therefore only needs to be checked once. The problem with this is that data doesn’t stay the same. People change their name on their profile, they update their picture etc. and if everything is cached forever, then those updates aren’t possible.</p>
<p>Cache invalidation is an incredibly hard problem:</p>
<blockquote>
<p>There are only two hard things in computer science: cache invalidation and naming things. - Phil Karlton</p>
</blockquote>
<p>The question is basically “How much of the data we’re guessing will be useful later should we be keeping around, and for how long is it useful?”. One of the most common solutions is to pick a cap, for example only cache 200 pieces of user info at a time, or limit it to only X number of Mb of data etc.</p>
<p>One incredibly common option in webdev is TTL (time to live), which is often set to something like 10 mins. This means for each user the caches on their system are valid for 10 mins, then they are <strong>all</strong> purged and remade.</p>
<p>Another common problem where you can run into issues is when <a href="https://blog.twitter.com/engineering/en_us/topics/open-source/2021/dropping-cache-didnt-drop-cache" class="external alias">you think you’re clearing your cache properly, and aren’t</a>.</p>
<p>In fact the common joke about turning a computer system on and off again largely comes from caches. Often times programs store things in memory, which on your system is then stored in RAM. RAM will automatically purge it’s entire cache when it loses power. This is why turning computers off and on again is sometimes handy!</p>
<h2 id="cache-invalidation-strategies">Cache Invalidation Strategies<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#cache-invalidation-strategies" class="internal alias"> §</a></h2>
<p>There are tons of cache invalidation strategies you can use to make sure your data is correct, while still getting some of the performance benefits of caching. There’s not enough time to cover them all, and you will likely on most projects want to employ more than one of these, but here are a few approaches.</p>
<h3 id="fixed-length">Fixed-length<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#fixed-length" class="internal alias"> §</a></h3>
<p>Essentially this system is what we’ve been talking about all this time, except we get rid of items when the cache reaches a certain size. This can be very important in systems with limited resources. You essentially just check if the cache has more items than a set threshold, and if it does you can either do:</p>
<ul>
<li>FIFO (Queue): First in First out, essentially you delete the oldest items first as you go</li>
<li>LIFO (Stack): Last in First out, This means you delete the newest items first as you go</li>
</ul>
<p>Depending on what you need. Keep in mind that some of the data types (maps, dictionaries etc.) in languages are <strong>unordered</strong>. This means deleting the “first” key might be just deleting the first key alphabetically, or randomly, not necessarily the first key entered.</p>
<h3 id="time-basedttl">Time-based/TTL<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#time-basedttl" class="internal alias"> §</a></h3>
<p>We already talked about TTL (time to live), this basically says “Hey this cache is valid for the next X mins/hours/days”. When people make a request the server will check if the current date &amp; time are <strong>before</strong> the expiry, and if they are after they will update the cache. It might look something like this:</p>
<pre><code class="mermaid">flowchart TD
    A[User] -->|Request site| B(Server)
    B --> C{See if current time >= expiry}
    C -->|No| D[Cache]
    D -->|Return stored result to user| A
    C -->|Yes| E{Cache is invalid}
    E --Request data then update cache &amp; expiry-->D
</code></pre>
<p>With our earlier code, we could update it to expire after 10 mins:</p>
<p><code>js</code></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="javascript" data-theme="github-dark github-light"><code data-language="javascript" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> users</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Map</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Store results of user queries</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> getUser</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">userID</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">){</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">!</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">has</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID)){ </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// New ID</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Connect and get database object</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">connect</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(); </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Query for user</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> db.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, userID);</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Store data for next time</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        userData </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Map</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">();</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        userData.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">set</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;data&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, data)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Set expiry</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> MINUTESTOMILISECONDS</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 60000</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // NOTE: To add 10 mins you need to add 10 mins worth of miliseconds</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        tenMinsFromNow </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Date</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(Date.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">now</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">+</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">10</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">*</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> MINUTESTOMILISECONDS</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">))</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        userData.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">set</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;expiry&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, tenMinsFromNow)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">set</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID, userData)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> userData.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;data&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    } </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">else</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">{</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">            //Check if cache is valid</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">            if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (Date.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">now</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;expiry&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)){ </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">                // Connect and get database object</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">                db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">connect</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(); </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">                // Query for user</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">                data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> db.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, userID);</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">                // Store data for next time</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">                userData </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Map</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">();</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">                userData.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">set</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;data&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, data)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">                // Set expiry</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">                const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> MINUTESTOMILISECONDS</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 60000</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">                // NOTE: To add 10 mins you need to add 10 mins worth of miliseconds</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">                tenMinsFromNow </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Date</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(Date.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">now</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">+</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">10</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">*</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> MINUTESTOMILISECONDS</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)) </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">                userData.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">set</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;expiry&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, tenMinsFromNow)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">                users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">set</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID, userData)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            }</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;data&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    }</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span>
<span data-line> </span></code></pre></figure>
<p><code>python</code></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> datetime </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> datetime, timedelta</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">users </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">() </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Store results of user queries</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> get_user</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(user_id: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    user_data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users.get(user_id, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">False</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> not</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> user_data: </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># New user ID</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        # Connect and get database object</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.connect() </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        # Query for user</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> db.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, user_id)</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        # Store for next time</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        users[user_id] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;data&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:data, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;expiry&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">: datetime.now()</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">+</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">timedelta(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">minutes</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">10</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)}</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users[user_id][</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;data&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    else</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> datetime.now() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users[user_id][</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;expiry&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]: </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Check if cache is valid</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">            # Connect and get database object</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.connect() </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">            # Query for user</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> db.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, user_id)</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">            # Store for next time</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">            users[user_id] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;data&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:data, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;expiry&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">: datetime.now()</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">+</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">timedelta(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">minutes</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">10</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)}</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users[user_id][</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;data&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]</span></span>
<span data-line> </span></code></pre></figure>
<p>You can also use this for pre-fetching data. For example maybe you have users across the world, and you know people will use your service at 6pm <strong>IN THEIR TIMEZONE</strong>, so you can clear and fill your cache with people in different regions at 5:55pm their time. This can help mitigate outages if your system can’t handle the load of people all trying to call the function at the same time!</p>
<p>This approach is “easy” to implement, but it comes with a ton of problems:</p>
<ul>
<li><strong>Time is relative;</strong> This isn’t a physics rant, time is literally relative around the world. Daylight savings, timezones etc. Not everyone’s 5pm is the same 5pm, even every persons hour is not the same. In lots of situations if you set a cache to expire in 10 mins, then daylight savings happens the cache might not invalidate for an hour longer than you were expecting!</li>
<li><strong>Moving pieces are hard to track;</strong> Usually your system won’t have one function being called. Lots of stuff happens at different times. Not every user is going to update their profile picture at your exact 10 min interval. This doesn’t matter a lot of the time, but for something time sensitive (like concert tickets going on sale), this can cause issues.</li>
<li><strong>Crystal balls aren’t very helpful;</strong> While lots of people are predictable, not every situation is. Let’s say you have the time based pre-fetching system in place, and you’re a movie streaming service. But then the global launch of a popular movie is at 3am in a country. You will end up with a massive load of traffic from that country at a time you weren’t expecting, and your caches won’t help you.</li>
</ul>
<p>All of these problems are present in the above example. There will actually be several bugs if you use the code provided. In python you can use timezone packages like <a href="https://pypi.org/project/pytz/" class="external alias">pytz</a> to avoid some of the problems, and in javascript <a href="https://github.com/spencermountain/spacetime" class="external alias">spacetime</a> has similar functionality.</p>
<h3 id="updatepush-based">Update/Push-based<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#updatepush-based" class="internal alias"> §</a></h3>
<p>This method is essentially updating the cache when there is new data. This means you essentially “subscribe” to any changes. Here might be an example:</p>
<p><code>js</code></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="javascript" data-theme="github-dark github-light"><code data-language="javascript" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> users</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Map</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Store results of user queries</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> updateUser</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">user_id</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">data</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">){</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">    // Connect and get database object</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">connect</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">() </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">    // Store data in DB</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    db.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">store</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, user_id, data) </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">has</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID)){ </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Exists in cache</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Update cache</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">set</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID, data)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    }</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> getUser</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">userID</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">){</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">!</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">has</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID)){ </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// New ID</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Connect and get database object</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">connect</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(); </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Query for user</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> db.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, userID);</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Store data for next time</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">set</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID, data)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    } </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">else</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">{</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(userID)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    }</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span>
<span data-line> </span></code></pre></figure>
<p><code>python</code></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">users </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">() </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Store results of user queries</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> update_user</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(user_id: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, data: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">    # Connect and get database object</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.connect() </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">    # Store data in DB</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    db.store(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, user_id, data) </span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">    # Update cache</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    user_data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users.get(user_id, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">False</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> user_data: </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># Exists in cache</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        users[user_id] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data </span></span>
<span data-line> </span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> get_user</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(user_id: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">int</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">):</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    user_data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> users.get(user_id, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">False</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> not</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> user_data: </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># New user ID</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        # Connect and get database object</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        db </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> database.connect() </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        # Query for user</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        data </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> db.get(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, user_id)</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        # Store for next time</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        users[user_id] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> data</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    else</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> user_data</span></span>
<span data-line> </span></code></pre></figure>
<h3 id="event-based">Event Based<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#event-based" class="internal alias"> §</a></h3>
<p>Sometimes changes happen on very regular schedules. For these sorts of changes you can have the cache invalidation happen only after a threshold event. For example you only have to update a cached list of results of games in a soccer tournament <strong>after each game</strong>. So you can have the cache be updated when the game has officially been ended and called by the referee.</p>
<h2 id="resources">Resources<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#resources" class="internal alias"> §</a></h2>
<ul>
<li>Hardware
<ul>
<li><a href="https://www.youtube.com/watch?v=Zr8WKIOIKsk" class="external alias">Cache Memory Explained - YouTube</a></li>
<li><a href="https://www.youtube.com/watch?v=YQEjGKYXjw8" class="external alias">SSDs vs Hard Drives as Fast As Possible (youtube.com)</a></li>
</ul>
</li>
<li>Caching systems
<ul>
<li><a href="https://valkey.io/" class="external alias">Valkey</a></li>
<li><a href="https://varnish-cache.org/" class="external alias">Varnish HTTP Cache — Varnish HTTP Cache (varnish-cache.org)</a></li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=dGAgxozNWFE" class="external alias">Cache Systems Every Developer Should Know (youtube.com)</a></li>
<li><a href="https://www.youtube.com/watch?v=Ez_kyBS-y5w" class="external alias">Introduction to Cache Memory (youtube.com)</a></li>
<li><a href="https://www.youtube.com/watch?v=U6gf2PRBmQY" class="external alias">Cache Memory 1: Introduction (youtube.com)</a></li>
<li><a href="https://codeahoy.com/2017/08/11/caching-strategies-and-how-to-choose-the-right-one/" class="external alias">Caching Strategies and How to Choose the Right One | CodeAhoy</a></li>
<li><a href="https://hazelcast.com/glossary/caching-strategies/" class="external alias">Caching Strategies - 5 Strategies for Managing Cache Space (hazelcast.com)</a></li>
<li><a href="https://docs.aws.amazon.com/whitepapers/latest/database-caching-strategies-using-redis/caching-patterns.html" class="external alias">Caching patterns - Database Caching Strategies Using Redis (amazon.com)</a></li>
<li><a href="https://medium.com/@mmoshikoo/cache-strategies-996e91c80303" class="external alias">Cache Strategies | Medium</a></li>
<li>Network-level CDN
<ul>
<li><a href="https://www.youtube.com/watch?v=RI9np1LWzqw" class="external alias">What Is A CDN? How Does It Work? (youtube.com)</a></li>
<li><a href="https://www.youtube.com/watch?v=crPoHnhkjFE" class="external alias">Introduction to Distributed Caching - Systems Design Interview 0 to 1 with Ex-Google SWE (youtube.com)</a></li>
<li><a href="https://www.youtube.com/watch?v=QBMTGngjWdU" class="external alias">Distributed Cache explained - Software Architecture Introduction (part 3) (youtube.com)</a></li>
</ul>
</li>
</ul></article></div><div class="right sidebar"><div class="graph "><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#memory-vs-storage" data-for="memory-vs-storage">Memory vs Storage</a></li><li class="depth-0"><a href="#a-note-about-the-examples" data-for="a-note-about-the-examples">A Note About The Examples</a></li><li class="depth-0"><a href="#simple-example-memoization" data-for="simple-example-memoization">Simple Example (memoization)</a></li><li class="depth-0"><a href="#pre-fetchespre-caches" data-for="pre-fetchespre-caches">Pre-fetches/Pre-caches</a></li><li class="depth-0"><a href="#layers-of-caches" data-for="layers-of-caches">Layers of Caches</a></li><li class="depth-1"><a href="#deviceos-cache" data-for="deviceos-cache">Device/OS Cache</a></li><li class="depth-1"><a href="#browser-cache" data-for="browser-cache">Browser Cache</a></li><li class="depth-1"><a href="#servercdn-cache" data-for="servercdn-cache">Server/CDN cache</a></li><li class="depth-1"><a href="#full-example" data-for="full-example">Full Example</a></li><li class="depth-0"><a href="#issues-with-caches" data-for="issues-with-caches">Issues With Caches</a></li><li class="depth-0"><a href="#cache-invalidation-strategies" data-for="cache-invalidation-strategies">Cache Invalidation Strategies</a></li><li class="depth-1"><a href="#fixed-length" data-for="fixed-length">Fixed-length</a></li><li class="depth-1"><a href="#time-basedttl" data-for="time-basedttl">Time-based/TTL</a></li><li class="depth-1"><a href="#updatepush-based" data-for="updatepush-based">Update/Push-based</a></li><li class="depth-1"><a href="#event-based" data-for="event-based">Event Based</a></li><li class="depth-0"><a href="#resources" data-for="resources">Resources</a></li></ul></div></div><div class="backlinks "><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/" target="_blank">Quartz v4.1.4</a>, © 2024</p><ul><li><a href="https://github.com/descent098">GitHub</a></li><li><a href="https://linkedin.com/in/kieran-wood">LinkedIn</a></li><li><a href="https://kieranwood.ca">Main Site</a></li><li><a href="https://canadiancoding.ca">Canadian Coding</a></li><li><a href="https://kieranwood.ca/tech">Tech Blog</a></li><li><a href="https://kieranwood.ca/philosophy">Philosophy Blog</a></li></ul><script>document.querySelectorAll('img').forEach( 
  (image)=>{
      image.addEventListener('click', focusImage)
  }
)

function focusImage(){
  if (this.classList.contains('focusedImage')){
      document.exitFullscreen()
  }else{
      this.requestFullscreen()
  }
  this.classList.toggle('focusedImage')
}</script></footer></div></body><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="../postscript.js" type="module"></script></html>